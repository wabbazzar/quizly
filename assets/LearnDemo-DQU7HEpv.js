import{r as e,j as s,u as a,m as t}from"./index-CoElTYbf.js";import{c as r,s as i,Q as n}from"./Learn.module-DHiza-ia.js";import"./cardMasteryStore-DLoKfaPt.js";import"./SharedModeHeader-CqmUSN6k.js";import"./SettingsIcon-CGtfF6CW.js";const c="_progressContainer_1fx4u_1",l="_progressBarWrapper_1fx4u_10",o="_progressBar_1fx4u_10",d="_progressFill_1fx4u_23",m="_progressText_1fx4u_35",u="_progressTextOutside_1fx4u_42",x="_statsGrid_1fx4u_54",h="_statItem_1fx4u_61",_="_statLabel_1fx4u_79",p="_statValue_1fx4u_87",y="_goodAccuracy_1fx4u_96",g="_poorAccuracy_1fx4u_100",q="_streakFire_1fx4u_104",j="_masterySection_1fx4u_122",N="_masteryIndicators_1fx4u_127",v="_masteryItem_1fx4u_135",f="_masteryDot_1fx4u_141",k="_masteredDot_1fx4u_148",w="_strugglingDot_1fx4u_153",C="_masteryLabel_1fx4u_158",S="_masteryCount_1fx4u_166",b=e.memo(({progress:e,className:a})=>{const t=e.totalQuestions>0?e.questionsAnswered/e.totalQuestions*100:0,i=e.questionsAnswered>0?e.correctAnswers/e.questionsAnswered*100:0;return s.jsxs("div",{className:r(c,a),children:[s.jsxs("div",{className:l,children:[s.jsx("div",{className:o,role:"progressbar","aria-valuenow":Math.round(t),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progress: ${e.questionsAnswered} of ${e.totalQuestions} questions`,children:s.jsx("div",{className:d,style:{width:`${t}%`},children:t>20&&s.jsxs("span",{className:m,children:[Math.round(t),"%"]})})}),t<=20&&s.jsxs("span",{className:u,children:[Math.round(t),"%"]})]}),s.jsxs("div",{className:x,children:[s.jsxs("div",{className:h,children:[s.jsx("span",{className:_,children:"Progress"}),s.jsxs("span",{className:p,children:[e.questionsAnswered,"/",e.totalQuestions]})]}),s.jsxs("div",{className:h,children:[s.jsx("span",{className:_,children:"Accuracy"}),s.jsxs("span",{className:r(p,i>=80&&y,i<60&&g),children:[Math.round(i),"%"]})]}),s.jsxs("div",{className:h,children:[s.jsx("span",{className:_,children:"Streak"}),s.jsxs("span",{className:p,children:[e.currentStreak,e.currentStreak>=3&&s.jsx("span",{className:q,"aria-label":"fire streak",children:"ðŸ”¥"})]})]}),s.jsxs("div",{className:h,children:[s.jsx("span",{className:_,children:"Avg Time"}),s.jsx("span",{className:p,children:(e=>{const s=Math.round(e/1e3);if(s<60)return`${s}s`;return`${Math.floor(s/60)}m ${s%60}s`})(e.averageResponseTime)})]})]}),s.jsx("div",{className:j,children:s.jsxs("div",{className:N,children:[s.jsxs("div",{className:v,children:[s.jsx("div",{className:r(f,k),"aria-hidden":"true"}),s.jsxs("span",{className:C,children:["Mastered",s.jsx("strong",{className:S,children:e.passedCards.size})]})]}),s.jsxs("div",{className:v,children:[s.jsx("div",{className:r(f,w),"aria-hidden":"true"}),s.jsxs("span",{className:C,children:["Needs Practice",s.jsx("strong",{className:S,children:e.strugglingCards.size})]})]}),e.maxStreak>0&&s.jsx("div",{className:v,children:s.jsxs("span",{className:C,children:["Best Streak",s.jsx("strong",{className:S,children:e.maxStreak})]})})]})})]})});b.displayName="LearnProgress";const A={sessionComplete:"_sessionComplete_qqxqh_1",container:"_container_qqxqh_10",header:"_header_qqxqh_20",title:"_title_qqxqh_25",excellent:"_excellent_qqxqh_32",great:"_great_qqxqh_36",good:"_good_qqxqh_40",fair:"_fair_qqxqh_44",needsWork:"_needsWork_qqxqh_48",subtitle:"_subtitle_qqxqh_52",resultsGrid:"_resultsGrid_qqxqh_59",resultCard:"_resultCard_qqxqh_66",resultValue:"_resultValue_qqxqh_73",resultLabel:"_resultLabel_qqxqh_80",masterySection:"_masterySection_qqxqh_88",masteryItem:"_masteryItem_qqxqh_95",masteryDot:"_masteryDot_qqxqh_106",mastered:"_mastered_qqxqh_113",struggling:"_struggling_qqxqh_117",masteryText:"_masteryText_qqxqh_121",duration:"_duration_qqxqh_132",actions:"_actions_qqxqh_140",actionButton:"_actionButton_qqxqh_146",keyHint:"_keyHint_qqxqh_163",primary:"_primary_qqxqh_186",secondary:"_secondary_qqxqh_195",tertiary:"_tertiary_qqxqh_211",motivationalMessage:"_motivationalMessage_qqxqh_229"};e.memo(({results:r,deckName:i,onRetry:n,onBackToDeck:c})=>{const l=a(),o=r.passedCards.length===r.totalQuestions&&0===r.strugglingCards.length;e.useEffect(()=>{const e=e=>{const s=e.target;s&&("INPUT"===s.tagName||"TEXTAREA"===s.tagName||s.isContentEditable)||("1"!==e.key||o?"2"===e.key?(e.preventDefault(),c()):"3"===e.key&&(e.preventDefault(),l("/")):(e.preventDefault(),n()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,c,l,o]);const d=e=>{const s=Math.floor(e/1e3),a=Math.floor(s/60);return a>0?`${a}m ${s%60}s`:`${s}s`},m=(()=>{if(o)return{message:"Deck Mastered!",color:"excellent"};const e=r.accuracy;return e>=90?{message:"Outstanding!",color:"excellent"}:e>=80?{message:"Great job!",color:"great"}:e>=70?{message:"Good work!",color:"good"}:e>=60?{message:"Keep practicing!",color:"fair"}:{message:"Don't give up!",color:"needsWork"}})();return s.jsx(t.div,{className:A.sessionComplete,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},"data-testid":"session-complete",children:s.jsxs("div",{className:A.container,children:[s.jsxs("header",{className:A.header,children:[s.jsx("h1",{className:`${A.title} ${A[m.color]}`,children:m.message}),s.jsx("p",{className:A.subtitle,children:o?`You've mastered all cards in ${i}`:`Learn session complete - ${i}`})]}),s.jsxs("div",{className:A.resultsGrid,children:[s.jsxs(t.div,{className:A.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[s.jsxs("div",{className:A.resultValue,children:[Math.round(r.accuracy),"%"]}),s.jsx("div",{className:A.resultLabel,children:"Accuracy"})]}),s.jsxs(t.div,{className:A.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[s.jsxs("div",{className:A.resultValue,children:[r.correctAnswers,"/",r.totalQuestions]}),s.jsx("div",{className:A.resultLabel,children:"Correct"})]}),s.jsxs(t.div,{className:A.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[s.jsx("div",{className:A.resultValue,children:r.maxStreak}),s.jsx("div",{className:A.resultLabel,children:"Best Streak"})]}),s.jsxs(t.div,{className:A.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:[s.jsx("div",{className:A.resultValue,children:d(r.averageResponseTime)}),s.jsx("div",{className:A.resultLabel,children:"Avg Time"})]})]}),(r.passedCards.length>0||r.strugglingCards.length>0)&&s.jsx(t.div,{className:A.masterySection,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},children:o?s.jsxs("div",{className:A.masteryItem,children:[s.jsx("span",{className:`${A.masteryDot} ${A.mastered}`}),s.jsxs("span",{className:A.masteryText,children:["All ",s.jsx("strong",{children:r.totalQuestions})," cards mastered"]})]}):s.jsxs(s.Fragment,{children:[r.passedCards.length>0&&s.jsxs("div",{className:A.masteryItem,children:[s.jsx("span",{className:`${A.masteryDot} ${A.mastered}`}),s.jsxs("span",{className:A.masteryText,children:["Passed ",s.jsx("strong",{children:r.passedCards.length})," cards"]})]}),r.strugglingCards.length>0&&s.jsxs("div",{className:A.masteryItem,children:[s.jsx("span",{className:`${A.masteryDot} ${A.struggling}`}),s.jsxs("span",{className:A.masteryText,children:[s.jsx("strong",{children:r.strugglingCards.length})," cards to review"]})]})]})}),s.jsxs(t.div,{className:A.duration,initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Session duration: ",d(r.duration)]}),s.jsxs(t.div,{className:A.actions,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:[!o&&s.jsxs("button",{className:`${A.actionButton} ${A.primary}`,onClick:n,"data-testid":"retry-button",children:[s.jsx("span",{className:A.keyHint,children:"1"}),"Practice Again"]}),s.jsxs("button",{className:`${A.actionButton} ${A.secondary}`,onClick:c,"data-testid":"back-button",children:[s.jsx("span",{className:A.keyHint,children:"2"}),"Back to Deck"]}),s.jsxs("button",{className:`${A.actionButton} ${A.tertiary}`,onClick:()=>l("/"),"data-testid":"home-button",children:[s.jsx("span",{className:A.keyHint,children:"3"}),"Home"]})]}),r.accuracy<70&&s.jsx(t.p,{className:A.motivationalMessage,initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"Remember: Every expert was once a beginner. Keep practicing and you'll improve with each session!"})]})})}).displayName="SessionComplete";const $=[{id:"1",type:"multiple_choice",cardIndex:0,questionText:'What is the Chinese word for "hello"?',questionSides:["side_a"],correctAnswer:"ä½ å¥½",options:["ä½ å¥½","è°¢è°¢","å†è§","æ—©ä¸Šå¥½"],difficulty:.3},{id:"2",type:"free_text",cardIndex:1,questionText:'How do you say "thank you" in Chinese?',questionSides:["side_a"],correctAnswer:"è°¢è°¢",acceptedAnswers:["è°¢è°¢","xie xie","xiexie","xiÃ¨xie"],difficulty:.5},{id:"3",type:"multiple_choice",cardIndex:2,questionText:'Which of these means "goodbye"?',questionSides:["side_a"],correctAnswer:"å†è§",options:["æ™šå®‰","æ—©ä¸Šå¥½","å†è§","ä½ å¥½"],difficulty:.4}],T=()=>{const[a,t]=e.useState(0),[r,c]=e.useState(!1),[l,o]=e.useState(!1),[d,m]=e.useState({questionsAnswered:0,totalQuestions:$.length,correctAnswers:0,currentStreak:0,maxStreak:0,passedCards:new Set,strugglingCards:new Set,averageResponseTime:3500}),u=$[a],x=()=>{a<$.length-1?(t(e=>e+1),c(!1),o(!1)):alert("Session complete! Great job!")};return s.jsxs("div",{className:i.learnPage,children:[s.jsxs("header",{className:i.header,children:[s.jsx("h1",{className:i.title,children:"Learn Mode Demo"}),s.jsx("p",{className:i.subtitle,children:"Test the Learn UI components"})]}),s.jsxs("main",{className:i.content,children:[s.jsx(b,{progress:d,className:i.progressSection}),s.jsx(n,{question:u,onAnswer:(e,s)=>{o(s),c(!0),m(e=>{const a=s?e.correctAnswers+1:e.correctAnswers,t=s?e.currentStreak+1:0,r=Math.max(e.maxStreak,t),i=e.questionsAnswered+1,n=new Set(e.passedCards),c=new Set(e.strugglingCards);return s&&t>=3?(n.add(u.cardIndex),c.delete(u.cardIndex)):s||c.add(u.cardIndex),{...e,questionsAnswered:i,correctAnswers:a,currentStreak:t,maxStreak:r,passedCards:n,strugglingCards:c}}),setTimeout(()=>{x()},2e3)},showFeedback:r,feedback:r?{isCorrect:l,correctAnswer:u.correctAnswer,explanation:l?"Great job! You got it right.":`The correct answer is "${u.correctAnswer}".`}:void 0,disabled:r}),r&&s.jsx("div",{className:i.navigationButtons,children:s.jsx("button",{className:i.continueButton,onClick:x,"data-testid":"continue-button",children:a<$.length-1?"Next Question":"Finish"})})]})]})};export{T as default};
