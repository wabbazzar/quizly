{"version":3,"file":"transcriptService-BCIO_PIi.js","sources":["../../src/services/transcriptService.ts"],"sourcesContent":["/**\n * Service for loading and managing transcript files\n * Transcripts are raw text files for external TTS readers like Speechify\n */\n\nimport { TranscriptFile, TranscriptManifest } from '@/types';\n\n// Use BASE_URL to handle GitHub Pages base path (/quizly/)\nconst getTranscriptsBasePath = () => `${import.meta.env.BASE_URL}data/transcripts`;\n\nlet manifestCache: TranscriptManifest | null = null;\n\n/**\n * Load the transcript manifest (cached after first load)\n */\nexport async function loadTranscriptManifest(): Promise<TranscriptManifest> {\n  if (manifestCache) {\n    return manifestCache;\n  }\n\n  const response = await fetch(`${getTranscriptsBasePath()}/manifest.json`);\n  if (!response.ok) {\n    throw new Error('Failed to load transcript manifest');\n  }\n\n  manifestCache = await response.json();\n  return manifestCache as TranscriptManifest;\n}\n\n/**\n * Get all transcripts for a specific deck\n */\nexport async function getTranscriptsForDeck(deckId: string): Promise<TranscriptFile[]> {\n  const manifest = await loadTranscriptManifest();\n  return manifest.transcripts.filter(t => t.deckId === deckId);\n}\n\n/**\n * Load the text content of a transcript file\n */\nexport async function loadTranscriptContent(filename: string): Promise<string> {\n  const response = await fetch(`${getTranscriptsBasePath()}/${filename}`);\n  if (!response.ok) {\n    throw new Error(`Failed to load transcript: ${filename}`);\n  }\n  return response.text();\n}\n\n/**\n * Clear the manifest cache (useful for testing or forcing reload)\n */\nexport function clearManifestCache(): void {\n  manifestCache = null;\n}\n\n/**\n * Check if any transcripts exist for a deck\n */\nexport async function hasTranscriptsForDeck(deckId: string): Promise<boolean> {\n  const transcripts = await getTranscriptsForDeck(deckId);\n  return transcripts.length > 0;\n}\n"],"names":["manifestCache","async","getTranscriptsForDeck","deckId","response","fetch","ok","Error","json","loadTranscriptManifest","transcripts","filter","t","loadTranscriptContent","filename","text","hasTranscriptsForDeck","length"],"mappings":"AAUA,IAAIA,EAA2C,KAsB/CC,eAAsBC,EAAsBC,GAE1C,aAnBFF,iBACE,GAAID,EACF,OAAOA,EAGT,MAAMI,QAAiBC,MAAM,0CAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAM,sCAIlB,OADAP,QAAsBI,EAASI,OACxBR,CACT,CAMyBS,IACPC,YAAYC,OAAOC,GAAKA,EAAET,SAAWA,EACvD,CAKAF,eAAsBY,EAAsBC,GAC1C,MAAMV,QAAiBC,MAAM,4BAA+BS,KAC5D,IAAKV,EAASE,GACZ,MAAM,IAAIC,MAAM,8BAA8BO,KAEhD,OAAOV,EAASW,MAClB,CAYAd,eAAsBe,EAAsBb,GAE1C,aAD0BD,EAAsBC,IAC7Bc,OAAS,CAC9B"}