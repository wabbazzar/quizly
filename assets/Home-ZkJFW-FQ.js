import{r as e,u as a,a as t,j as s,m as i,b as r,A as n}from"./index-K5uqA-3n.js";import{u as o}from"./progressStore-DPupY7fl.js";import{F as c,L as l,M as d,R as m,C as _,a as h,b as g}from"./ModeIcons-DELIAF_0.js";import"./cardMasteryStore-z-5vmz49.js";const u={enhancedDeckCard:"_enhancedDeckCard_m1o55_2",progressRing:"_progressRing_m1o55_26",progressSvg:"_progressSvg_m1o55_34",progressBackground:"_progressBackground_m1o55_40",progressFill:"_progressFill_m1o55_45",progressText:"_progressText_m1o55_50",cardHeader:"_cardHeader_m1o55_58",deckName:"_deckName_m1o55_66",difficultyBadge:"_difficultyBadge_m1o55_75",beginner:"_beginner_m1o55_84",intermediate:"_intermediate_m1o55_89",advanced:"_advanced_m1o55_94","beginner-to-intermediate":"_beginner-to-intermediate_m1o55_99",subtitle:"_subtitle_m1o55_105",description:"_description_m1o55_114",stats:"_stats_m1o55_126",statItem:"_statItem_m1o55_133",statIcon:"_statIcon_m1o55_141",statValue:"_statValue_m1o55_146",statLabel:"_statLabel_m1o55_151",tags:"_tags_m1o55_156",tag:"_tag_m1o55_156",modeStrip:"_modeStrip_m1o55_172",modeButton:"_modeButton_m1o55_180",flashcards:"_flashcards_m1o55_206",learn:"_learn_m1o55_211",match:"_match_m1o55_216",test:"_test_m1o55_221",modeIcon:"_modeIcon_m1o55_232",modeLabel:"_modeLabel_m1o55_239",modeProgress:"_modeProgress_m1o55_246"},p=e=>{if(!e)return"Never";const a=(new Date).getTime()-e.getTime(),t=Math.floor(a/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:`${Math.floor(t/30)} months ago`},x=({value:e})=>{const a=2*Math.PI*16,t=a-e/100*a;return s.jsxs("svg",{viewBox:"0 0 40 40",className:u.progressSvg,children:[s.jsx("circle",{cx:"20",cy:"20",r:16,className:u.progressBackground,strokeWidth:"2.5",fill:"none"}),s.jsx("circle",{cx:"20",cy:"20",r:16,className:u.progressFill,strokeWidth:"2.5",fill:"none",strokeDasharray:a,strokeDashoffset:t,strokeLinecap:"round"}),s.jsxs("text",{x:"20",y:"20",className:u.progressText,textAnchor:"middle",dy:"0.3em",children:[Math.round(e),"%"]})]})},y=({level:e})=>e?s.jsx("span",{className:`${u.difficultyBadge} ${u[e.replace("_","-")]}`,children:e.replace("_"," ")}):null,j=e.memo(({deck:r,progress:n={overall:0,byMode:{},totalCardsStudied:0,streakDays:0,masteredCards:0,totalCards:r.content.length},onModeSelect:o})=>{const[j,v]=e.useState(!1),N=a(),{showNotification:f}=t(),{metadata:b}=r,k=[{id:"flashcards",label:"Flashcards",icon:c,color:"primary",description:"Classic flip cards",route:`/flashcards/${r.id}`},{id:"learn",label:"Learn",icon:l,color:"secondary",description:"Interactive questions",route:`/learn/${r.id}`},{id:"match",label:"Match",icon:d,color:"purple",description:"Memory game",route:`/match/${r.id}`},{id:"read",label:"Read",icon:m,color:"orange",description:"Structured reading practice",route:`/read/${r.id}`}];return s.jsxs(i.article,{className:u.enhancedDeckCard,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onHoverStart:()=>v(!0),onHoverEnd:()=>v(!1),onClick:()=>{N(`/deck/${r.id}`)},layout:!0,children:[n.overall>0&&s.jsx("div",{className:u.progressRing,children:s.jsx(x,{value:n.overall})}),s.jsxs("header",{className:u.cardHeader,children:[s.jsx("h3",{className:u.deckName,children:b.deck_name}),s.jsx(y,{level:b.difficulty})]}),b.deck_subtitle&&s.jsx("p",{className:u.subtitle,children:b.deck_subtitle}),b.description&&s.jsx("p",{className:u.description,children:b.description}),s.jsxs("div",{className:u.stats,children:[s.jsxs("div",{className:u.statItem,children:[s.jsx(_,{className:u.statIcon,size:16}),s.jsx("span",{className:u.statValue,children:n.masteredCards>0?`${n.masteredCards}/${b.card_count||r.content.length}`:b.card_count||r.content.length}),s.jsx("span",{className:u.statLabel,children:n.masteredCards>0?"mastered":"cards"})]}),b.available_levels&&b.available_levels.length>0&&s.jsxs("div",{className:u.statItem,children:[s.jsx(h,{className:u.statIcon,size:16}),s.jsx("span",{className:u.statValue,children:b.available_levels.length}),s.jsx("span",{className:u.statLabel,children:"levels"})]}),s.jsxs("div",{className:u.statItem,children:[s.jsx(g,{className:u.statIcon,size:16}),s.jsx("span",{className:u.statValue,children:p(n.lastStudied)})]})]}),b.tags&&b.tags.length>0&&s.jsxs("div",{className:u.tags,children:[b.tags.slice(0,3).map(e=>s.jsx("span",{className:u.tag,children:e},e)),b.tags.length>3&&s.jsxs("span",{className:u.tag,children:["+",b.tags.length-3]})]}),s.jsx(i.div,{className:u.modeStrip,initial:!1,animate:{opacity:j?1:.8},children:k.map(e=>s.jsxs(i.button,{className:`${u.modeButton} ${u[e.id]}`,onClick:a=>((e,a)=>{e.stopPropagation(),"read"!==a.id||r.reading&&0!==Object.keys(r.reading.dialogues).length?(o?.(r.id,a.id),N(a.route)):f({message:"No reading content available for this deck",type:"info",icon:"ðŸ“–",duration:3e3})})(a,e),whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Study ${b.deck_name} with ${e.label} mode`,title:e.description,children:[s.jsx(e.icon,{className:u.modeIcon}),s.jsx("span",{className:u.modeLabel,children:e.label})]},e.id))})]})});j.displayName="EnhancedDeckCard";const v="_container_1uic8_1",N="_header_1uic8_6",f="_iosSafeTop_1uic8_18",b="_title_1uic8_31",k="_taglineSvg_1uic8_40",S="_mascot_1uic8_45",w="_main_1uic8_75",C="_deckSection_1uic8_81",$="_sectionTitle_1uic8_85",I="_deckGrid_1uic8_92",z="_emptyState_1uic8_99",L="_emptyHint_1uic8_113",M="_errorContainer_1uic8_118",B="_retryButton_1uic8_139",D=()=>{const{decks:a,isLoading:t,error:c,loadDecks:l,selectDeck:d}=r(),{getDeckProgress:m}=o(),_=e.useRef(null);e.useEffect(()=>{const e=_.current;if(!e)return;const a=e.querySelector("img."+S);if(!a)return;const t=()=>{try{const t=a.getBoundingClientRect(),s=e.getBoundingClientRect(),i=Math.max(0,t.right-s.left+8);e.style.setProperty("--grad-start",`${Math.round(i)}px`),e.style.setProperty("--left-color","#5b82b0"),e.style.setProperty("--right-color",getComputedStyle(document.documentElement).getPropertyValue("--primary-main")||"#5b82b0")}catch{}};t();const s=()=>t();window.addEventListener("resize",s);const i=()=>{try{const s=document.createElement("canvas");s.width=1,s.height=1;const i=s.getContext("2d");if(!i)return;i.drawImage(a,0,0,1,1);const r=i.getImageData(0,0,1,1).data,n=e=>e.toString(16).padStart(2,"0"),o=`#${n(r[0])}${n(r[1])}${n(r[2])}`;e.style.setProperty("--header-start",o),t()}catch{}};return a.complete?i():a.addEventListener("load",i,{once:!0}),()=>{window.removeEventListener("resize",s)}},[]),e.useEffect(()=>{l()},[l]);const h=e.useCallback((e,a)=>{d(e)},[d]);return t?null:c?s.jsxs("div",{className:M,children:[s.jsx("h2",{children:"Error Loading Decks"}),s.jsx("p",{children:c}),s.jsx("button",{onClick:l,className:B,children:"Retry"})]}):s.jsxs("div",{className:v,children:[s.jsxs("header",{className:N,ref:_,children:[s.jsx("div",{className:f,"aria-hidden":"true"}),s.jsx("img",{src:"/quizly/icons/mrquizly.png",alt:"Mr. Quizly",className:S,decoding:"async",loading:"eager"}),s.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[s.jsx("h1",{className:b,children:"Quizly"}),s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1600 220",role:"img","aria-labelledby":"quizlyCursiveHeaderTitle",style:{width:"100%",height:"auto",maxHeight:120,transform:"rotate(-6deg) skewX(-6deg)",transformOrigin:"center center",marginTop:8},className:k,children:[s.jsx("title",{id:"quizlyCursiveHeaderTitle",children:"it's not a test! â€” cursive header"}),s.jsx("style",{children:'\n                  :root{\n                    --quizly-blue:#4A90E2;\n                    --quizly-white:#FFFFFF;\n                  }\n                  text {\n                    font-family: "Pacifico", "Lobster", "Brush Script MT", "Segoe Script",\n                                 "Snell Roundhand", "Dancing Script", cursive;\n                    font-size: 94px;\n                    font-weight: 700;\n                    fill: var(--quizly-white);\n                    letter-spacing: 3px;\n                    paint-order: stroke fill;\n                    stroke: var(--quizly-white);\n                    stroke-width: 1px;\n                    dominant-baseline: middle;\n                    text-anchor: middle;\n                  }\n                  .tg-center { display: block; }\n                  .tg-right { display: none; text-anchor: end; }\n                  @media (max-width: 768px) {\n                    .tg-center { display: none; }\n                    .tg-right { display: block; }\n                    text { font-size: 172px; stroke-width: 1.6px; }\n                  }\n                '}),s.jsx("text",{className:"tg-center",x:"50%",y:"120",children:"it's not a test!"}),s.jsx("text",{className:"tg-right",x:"100%",y:"120",children:"it's not a test!"})]})]})]}),s.jsx("main",{className:w,children:s.jsxs("section",{className:C,children:[s.jsx("h2",{className:$,children:"Available Decks"}),0===a.length?s.jsxs(i.div,{className:z,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[s.jsx("p",{children:"No decks available"}),s.jsx("p",{className:L,children:"Import a deck to get started"})]}):s.jsx(i.div,{className:I,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:s.jsx(n,{mode:"popLayout",children:a.map(e=>s.jsx(i.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:s.jsx(j,{deck:e,progress:m(e.id),onModeSelect:h})},e.id))})})]})})]})};export{D as default};
