import{r as e,j as s,c as a,u as d,d as i,b as l,m as r}from"./index-K5uqA-3n.js";const t="_reviewCard_2g1av_1",c="_expanded_2g1av_18",n="_side_2g1av_29",_="_sideLabel_2g1av_36",m="_content_2g1av_44",o="_divider_2g1av_51",h="_flipCard_2g1av_57",u="_flipHint_2g1av_67",x="_level_2g1av_74",j=({card:a,frontSides:d=["side_a"],backSides:i=["side_b"],showBothSides:l=!1})=>{const[r,j]=e.useState(!1),v=d.filter(e=>a[e]).map(e=>a[e]).join(" • "),p=i.filter(e=>a[e]).map(e=>a[e]).join(" • ");return s.jsxs("div",{className:`${t} ${l?c:""}`,onClick:()=>{l||j(!r)},role:l?void 0:"button",tabIndex:l?void 0:0,"aria-label":l?void 0:"Click to flip card",children:[l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:n,children:[s.jsx("div",{className:_,children:"Question"}),s.jsx("div",{className:m,children:v})]}),s.jsx("div",{className:o}),s.jsxs("div",{className:n,children:[s.jsx("div",{className:_,children:"Answer"}),s.jsx("div",{className:m,children:p})]})]}):s.jsxs("div",{className:h,children:[s.jsx("div",{className:m,children:r?p:v}),!l&&s.jsx("div",{className:u,children:r?"Click to see question":"Click to see answer"})]}),a.level&&s.jsxs("div",{className:x,children:["Level ",a.level]})]})},v="_resultsPage_1eumr_1",p="_resultsContainer_1eumr_10",N="_performanceHeader_1eumr_32",g="_performanceEmoji_1eumr_37",C="_performanceMessage_1eumr_53",b="_completionMessage_1eumr_60",f="_mainScore_1eumr_68",k="_accuracyDisplay_1eumr_73",w="_accuracyNumber_1eumr_80",S="_accuracyPercent_1eumr_87",y="_accuracyLabel_1eumr_94",A="_statsGrid_1eumr_101",B="_statCard_1eumr_108",$="_statValue_1eumr_115",D="_statLabel_1eumr_122",E="_additionalStats_1eumr_128",L="_statRow_1eumr_135",M="_statRowLabel_1eumr_146",T="_statRowValue_1eumr_151",U="_actionButtons_1eumr_158",P="_actionButton_1eumr_158",R="_primaryButton_1eumr_175",G="_secondaryButton_1eumr_186",H="_tertiaryButton_1eumr_196",F="_missedCardsSection_1eumr_239",I="_missedCardsTitle_1eumr_245",Q="_missedCardsGrid_1eumr_253",V="_modalOverlay_1eumr_294",O="_modalContent_1eumr_309",Y="_closeButton_1eumr_321",q="_modalTitle_1eumr_344",K="_modalCard_1eumr_351",z="_modalSide_1eumr_357",J=()=>{const{deckId:t}=a(),c=d(),n=i(),{currentDeck:_,loadDeck:m}=l(),[o,h]=e.useState(null),[u,x]=e.useState(!1),J=n.state?.results;if(e.useEffect(()=>{t&&!_&&m(t)},[t,_,m]),!J)return c("/"),null;const W=Math.round(J.accuracy),X=Math.round(J.duration/1e3),Z=Math.floor(X/60),ee=X%60,se=()=>{const e=_?.content?.length||0,s=J.passedCards?.length||0;if(e>0&&s>=e)return alert("🎉 Congratulations! You have passed all cards in this deck!"),void c(`/deck/${t}`);const a=J.passedCards?.length>0?J.passedCards:[];c(`/learn/${t}`,{state:{excludeCards:a,strugglingCards:J.strugglingCards||[]}})},ae=()=>{c(`/deck/${t}`)},de=()=>{c("/")},ie=()=>{x(!1),setTimeout(()=>h(null),300)};return e.useEffect(()=>{const e=e=>{if(!e.repeat&&!(e=>{if(!(e instanceof HTMLElement))return!1;const s=e.tagName.toLowerCase();return"input"===s||"textarea"===s||e.isContentEditable||"select"===s})(e.target)&&!u)switch(e.key){case"1":e.preventDefault(),se();break;case"2":e.preventDefault(),ae();break;case"3":e.preventDefault(),de()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[se,ae,de,u]),s.jsx("div",{className:v,children:s.jsxs("div",{className:p,children:[s.jsxs("div",{className:N,children:[s.jsx("div",{className:g,children:_&&J.passedCards?.length>=_.content.length?"🏆":W>=90?"🌟":W>=75?"✨":W>=60?"👍":"💪"}),s.jsx("h1",{className:C,children:_&&J.passedCards?.length>=_.content.length?"All Cards Passed!":W>=90?"Outstanding!":W>=75?"Great job!":W>=60?"Good effort!":"Keep practicing!"}),_&&J.passedCards?.length>=_.content.length&&s.jsxs("p",{className:b,children:["Congratulations! You've passed all ",_.content.length," cards in this session!"]})]}),s.jsxs("div",{className:f,children:[s.jsxs("div",{className:k,children:[s.jsx("span",{className:w,children:W}),s.jsx("span",{className:S,children:"%"})]}),s.jsx("p",{className:y,children:"Accuracy"})]}),s.jsxs("div",{className:A,children:[s.jsxs("div",{className:B,children:[s.jsx("div",{className:$,children:J.correctAnswers}),s.jsx("div",{className:D,children:"Correct"})]}),s.jsxs("div",{className:B,children:[s.jsx("div",{className:$,children:J.incorrectAnswers}),s.jsx("div",{className:D,children:"Incorrect"})]}),s.jsxs("div",{className:B,children:[s.jsxs("div",{className:$,children:[J.maxStreak," 🔥"]}),s.jsx("div",{className:D,children:"Best Streak"})]}),s.jsxs("div",{className:B,children:[s.jsxs("div",{className:$,children:[Z,":",ee.toString().padStart(2,"0")]}),s.jsx("div",{className:D,children:"Time"})]})]}),s.jsxs("div",{className:E,children:[s.jsxs("div",{className:L,children:[s.jsx("span",{className:M,children:"Total Questions:"}),s.jsx("span",{className:T,children:J.totalQuestions})]}),J.passedCards.length>0&&s.jsxs("div",{className:L,children:[s.jsx("span",{className:M,children:"Cards Passed:"}),s.jsx("span",{className:T,children:J.passedCards.length})]}),J.strugglingCards.length>0&&s.jsxs("div",{className:L,children:[s.jsx("span",{className:M,children:"Need Review:"}),s.jsx("span",{className:T,children:J.strugglingCards.length})]}),J.masteredCards&&J.masteredCards.length>0&&s.jsxs("div",{className:L,children:[s.jsx("span",{className:M,children:"Cards Mastered:"}),s.jsx("span",{className:T,children:J.masteredCards.length})]})]}),s.jsxs("div",{className:U,children:[s.jsx("button",{onClick:se,className:`${P} ${R}`,children:_&&J.passedCards?.length>=_.content.length?"View Deck":J.passedCards?.length>0?"Continue with New Cards":"Try Again"}),s.jsx("button",{onClick:ae,className:`${P} ${G}`,children:"Back to Deck"}),s.jsx("button",{onClick:de,className:`${P} ${H}`,children:"Home"})]}),_&&J.strugglingCards&&J.strugglingCards.length>0&&s.jsxs("div",{className:F,children:[s.jsx("h2",{className:I,children:"Cards to Review"}),s.jsx("div",{className:Q,children:J.strugglingCards.map(e=>{const a=_.content[e];return a?s.jsx("div",{onClick:()=>(e=>{h(e),x(!0)})(a),style:{cursor:"pointer"},children:s.jsx(j,{card:a,frontSides:["side_a"],backSides:["side_b"],showBothSides:!0})},e):null})})]}),u&&o&&s.jsx(r.div,{className:V,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ie,children:s.jsxs(r.div,{className:O,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[s.jsx("button",{className:Y,onClick:ie,children:"×"}),s.jsx("h3",{className:q,children:"Card Details"}),s.jsxs("div",{className:K,children:[s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_a?_.metadata.side_labels.side_a.charAt(0).toUpperCase()+_.metadata.side_labels.side_a.slice(1):"Side A (Front)"}),s.jsx("p",{children:o.side_a})]}),s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_b?_.metadata.side_labels.side_b.charAt(0).toUpperCase()+_.metadata.side_labels.side_b.slice(1):"Side B (Back)"}),s.jsx("p",{children:o.side_b})]}),o.side_c&&s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_c?_.metadata.side_labels.side_c.charAt(0).toUpperCase()+_.metadata.side_labels.side_c.slice(1):"Side C (Extra)"}),s.jsx("p",{children:o.side_c})]}),o.side_d&&s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_d?_.metadata.side_labels.side_d.charAt(0).toUpperCase()+_.metadata.side_labels.side_d.slice(1):"Side D"}),s.jsx("p",{children:o.side_d})]}),o.side_e&&s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_e?_.metadata.side_labels.side_e.charAt(0).toUpperCase()+_.metadata.side_labels.side_e.slice(1):"Side E"}),s.jsx("p",{children:o.side_e})]}),o.side_f&&s.jsxs("div",{className:z,children:[s.jsx("h4",{children:_?.metadata?.side_labels?.side_f?_.metadata.side_labels.side_f.charAt(0).toUpperCase()+_.metadata.side_labels.side_f.slice(1):"Side F"}),s.jsx("p",{children:o.side_f})]})]})]})})]})})};export{J as default};
