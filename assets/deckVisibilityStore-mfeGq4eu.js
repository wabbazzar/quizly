import{h as e,p as i}from"./index-CoElTYbf.js";let d=null;const r=e()(i((e,i)=>({hiddenDeckIds:[],families:[],familiesLoaded:!1,loadFamilies:async()=>{if(i().familiesLoaded)return;const r=await(async()=>{if(d)return d;try{const e=await fetch("/quizly/data/families.json");if(!e.ok)return[];const i=await e.json();if(!i||!Array.isArray(i.families))return[];const r=i.families.filter(e=>"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.description&&"string"==typeof e.color&&"number"==typeof e.sortOrder).map(e=>({id:e.id,name:e.name,description:e.description,color:e.color,sortOrder:e.sortOrder})).sort((e,i)=>e.sortOrder-i.sortOrder);return d=r,r}catch{return[]}})();e({families:r,familiesLoaded:!0})},toggleDeckVisibility:i=>{e(e=>({hiddenDeckIds:e.hiddenDeckIds.includes(i)?e.hiddenDeckIds.filter(e=>e!==i):[...e.hiddenDeckIds,i]}))},hideAllInFamily:(i,d)=>{e(e=>{const i=new Set(e.hiddenDeckIds);return d.forEach(e=>i.add(e)),{hiddenDeckIds:Array.from(i)}})},showAllInFamily:(i,d)=>{e(e=>({hiddenDeckIds:e.hiddenDeckIds.filter(e=>!d.includes(e))}))},isDeckHidden:e=>i().hiddenDeckIds.includes(e)}),{name:"deck-visibility-store",partialize:e=>({hiddenDeckIds:e.hiddenDeckIds})}));export{r as u};
