{"version":3,"file":"AllMatch-CPPDAz3k.js","sources":["../../src/pages/AllMatch.tsx"],"sourcesContent":["import { FC, useEffect, useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDeckStore } from '@/store/deckStore';\nimport { useDeckVisibilityStore } from '@/store/deckVisibilityStore';\nimport { Card, Deck } from '@/types';\nimport MatchContainer from '@/components/modes/match/MatchContainer';\nimport styles from './Match.module.css';\n\nconst AllMatch: FC = () => {\n  const navigate = useNavigate();\n  const { decks, isLoading: deckLoading } = useDeckStore();\n  const { hiddenDeckIds } = useDeckVisibilityStore();\n\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Create a virtual deck that combines all cards from all decks\n  const combinedDeck: Deck | null = useMemo(() => {\n    if (decks.length === 0) return null;\n\n    // Combine all cards from visible decks\n    const allCards: Card[] = [];\n    const visibleDecks = decks.filter(d => !hiddenDeckIds.includes(d.id));\n    visibleDecks.forEach((deck) => {\n      deck.content.forEach((card) => {\n        // Adjust the index to be unique across all decks\n        allCards.push({\n          ...card,\n          idx: allCards.length,\n        });\n      });\n    });\n\n    // Create a virtual deck with all cards\n    return {\n      id: 'all-decks',\n      metadata: {\n        deck_name: 'All Decks',\n        description: 'Combined cards from all decks',\n        category: 'combined',\n        available_levels: [1, 2, 3],\n        available_sides: 3,\n        card_count: allCards.length,\n        difficulty: 'intermediate',\n        tags: ['all'],\n        version: '1.0.0',\n        created_date: new Date().toISOString(),\n        last_updated: new Date().toISOString(),\n      },\n      content: allCards,\n    };\n  }, [decks, hiddenDeckIds]);\n\n  // Initialize once decks are loaded\n  useEffect(() => {\n    if (!deckLoading && combinedDeck && combinedDeck.content.length > 0) {\n      setIsInitialized(true);\n    }\n  }, [deckLoading, combinedDeck]);\n\n  // Prevent body scrolling on mobile\n  useEffect(() => {\n    document.body.classList.add('no-scroll');\n    return () => {\n      document.body.classList.remove('no-scroll');\n    };\n  }, []);\n\n  // Loading state\n  if (deckLoading || !isInitialized || !combinedDeck) {\n    return null;\n  }\n\n  // Check if we have enough cards\n  if (combinedDeck.content.length < 2) {\n    return (\n      <div className={styles.errorContainer}>\n        <div className={styles.errorContent}>\n          <h1>Insufficient Cards</h1>\n          <p>\n            Need at least 2 cards to play Match mode.\n            Current library has {combinedDeck.content.length} card\n            {combinedDeck.content.length === 1 ? '' : 's'}.\n          </p>\n          <button onClick={() => navigate('/')} className={styles.errorButton}>\n            Back to Home\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <MatchContainer deck={combinedDeck} onBackClick={() => navigate('/')} />\n    </div>\n  );\n};\n\nexport default AllMatch;\n"],"names":["AllMatch","navigate","useNavigate","decks","isLoading","deckLoading","useDeckStore","hiddenDeckIds","useDeckVisibilityStore","isInitialized","setIsInitialized","useState","combinedDeck","useMemo","length","allCards","filter","d","includes","id","forEach","deck","content","card","push","idx","metadata","deck_name","description","category","available_levels","available_sides","card_count","difficulty","tags","version","created_date","Date","toISOString","last_updated","useEffect","document","body","classList","add","remove","jsx","className","styles","errorContainer","children","jsxs","errorContent","onClick","errorButton","container","MatchContainer","onBackClick"],"mappings":"wXAQA,MAAMA,EAAe,KACnB,MAAMC,EAAWC,KACXC,MAAEA,EAAOC,UAAWC,GAAgBC,KACpCC,cAAEA,GAAkBC,KAEnBC,EAAeC,GAAoBC,EAAAA,UAAS,GAG7CC,EAA4BC,EAAAA,QAAQ,KACxC,GAAqB,IAAjBV,EAAMW,OAAc,OAAO,KAG/B,MAAMC,EAAmB,GAazB,OAZqBZ,EAAMa,OAAOC,IAAMV,EAAcW,SAASD,EAAEE,KACpDC,QAASC,IACpBA,EAAKC,QAAQF,QAASG,IAEpBR,EAASS,KAAK,IACTD,EACHE,IAAKV,EAASD,aAMb,CACLK,GAAI,YACJO,SAAU,CACRC,UAAW,YACXC,YAAa,gCACbC,SAAU,WACVC,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,EACjBC,WAAYjB,EAASD,OACrBmB,WAAY,eACZC,KAAM,CAAC,OACPC,QAAS,QACTC,cAAA,IAAkBC,MAAOC,cACzBC,cAAA,IAAkBF,MAAOC,eAE3BhB,QAASP,IAEV,CAACZ,EAAOI,IAkBX,OAfAiC,EAAAA,UAAU,MACHnC,GAAeO,GAAgBA,EAAaU,QAAQR,OAAS,GAChEJ,GAAiB,IAElB,CAACL,EAAaO,IAGjB4B,EAAAA,UAAU,KACRC,SAASC,KAAKC,UAAUC,IAAI,aACrB,KACLH,SAASC,KAAKC,UAAUE,OAAO,eAEhC,KAGCxC,GAAgBI,GAAkBG,EAKlCA,EAAaU,QAAQR,OAAS,EAE9BgC,EAAAA,IAAC,OAAIC,UAAWC,EAAOC,eACrBC,SAAAC,EAAAA,KAAC,MAAA,CAAIJ,UAAWC,EAAOI,aACrBF,SAAA,CAAAJ,EAAAA,IAAC,MAAGI,SAAA,8BACH,IAAA,CAAEA,SAAA,CAAA,iEAEoBtC,EAAaU,QAAQR,OAAO,QAChB,IAAhCF,EAAaU,QAAQR,OAAe,GAAK,IAAI,OAEhDgC,EAAAA,IAAC,SAAA,CAAOO,QAAS,IAAMpD,EAAS,KAAM8C,UAAWC,EAAOM,YAAaJ,SAAA,sBAS3EJ,EAAAA,IAAC,MAAA,CAAIC,UAAWC,EAAOO,UACrBL,SAAAJ,EAAAA,IAACU,EAAA,CAAenC,KAAMT,EAAc6C,YAAa,IAAMxD,EAAS,SAxB3D"}