{"version":3,"file":"Modal-BFeOgvFJ.js","sources":["../../src/components/ui/Modal.tsx"],"sourcesContent":["import { FC, memo, useEffect, useCallback, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { ModalProps } from './types';\nimport { Button } from './Button';\nimport styles from './Modal.module.css';\n\nexport const Modal: FC<ModalProps> = memo(\n  ({\n    isOpen,\n    onClose,\n    title,\n    children,\n    size = 'medium',\n    showCloseButton = true,\n    closeOnOverlayClick = true,\n    className = '',\n    footer,\n  }) => {\n    const modalRef = useRef<HTMLDivElement>(null);\n    const previousActiveElement = useRef<Element | null>(null);\n\n    // Handle escape key\n    const handleEscape = useCallback(\n      (e: KeyboardEvent) => {\n        if (e.key === 'Escape') {\n          onClose();\n        }\n      },\n      [onClose]\n    );\n\n    // Handle overlay click\n    const handleOverlayClick = useCallback(\n      (e: React.MouseEvent) => {\n        if (closeOnOverlayClick && e.target === e.currentTarget) {\n          onClose();\n        }\n      },\n      [closeOnOverlayClick, onClose]\n    );\n\n    // Focus management\n    useEffect(() => {\n      if (isOpen) {\n        // Store currently focused element\n        previousActiveElement.current = document.activeElement;\n\n        // Add escape listener\n        document.addEventListener('keydown', handleEscape);\n\n        // Prevent body scroll\n        document.body.style.overflow = 'hidden';\n\n        // Focus modal\n        if (modalRef.current) {\n          modalRef.current.focus();\n        }\n\n        return () => {\n          document.removeEventListener('keydown', handleEscape);\n          document.body.style.overflow = '';\n\n          // Restore focus to previous element\n          if (previousActiveElement.current instanceof HTMLElement) {\n            previousActiveElement.current.focus();\n          }\n        };\n      }\n      return undefined;\n    }, [isOpen, handleEscape]);\n\n    if (!isOpen) return null;\n\n    const modalClasses = [styles.modal, styles[size], className].filter(Boolean).join(' ');\n\n    const modalContent = (\n      <div className={styles.overlay} onClick={handleOverlayClick} aria-modal=\"true\" role=\"dialog\">\n        <div\n          className={modalClasses}\n          ref={modalRef}\n          tabIndex={-1}\n          role=\"document\"\n          aria-labelledby={title ? 'modal-title' : undefined}\n        >\n          {(title || showCloseButton) && (\n            <header className={styles.header}>\n              {title && (\n                <h2 id=\"modal-title\" className={styles.title}>\n                  {title}\n                </h2>\n              )}\n              {showCloseButton && (\n                <Button\n                  variant=\"tertiary\"\n                  size=\"small\"\n                  onClick={onClose}\n                  className={styles.closeButton}\n                  aria-label=\"Close modal\"\n                >\n                  <svg\n                    width=\"20\"\n                    height=\"20\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    aria-hidden=\"true\"\n                  >\n                    <path\n                      d=\"M15 5L5 15M5 5L15 15\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                    />\n                  </svg>\n                </Button>\n              )}\n            </header>\n          )}\n          <div className={styles.content}>{children}</div>\n          {footer && <footer className={styles.footer}>{footer}</footer>}\n        </div>\n      </div>\n    );\n\n    // Portal to body\n    return createPortal(modalContent, document.body);\n  }\n);\n\nModal.displayName = 'Modal';\n"],"names":["Modal","memo","isOpen","onClose","title","children","size","showCloseButton","closeOnOverlayClick","className","footer","modalRef","useRef","previousActiveElement","handleEscape","useCallback","e","key","handleOverlayClick","target","currentTarget","useEffect","current","document","activeElement","addEventListener","body","style","overflow","focus","removeEventListener","HTMLElement","modalClasses","styles","modal","filter","Boolean","join","modalContent","jsx","overlay","onClick","role","jsxs","ref","tabIndex","header","id","Button","variant","closeButton","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","content","createPortal","displayName"],"mappings":"saAMaA,EAAwBC,EAAAA,KACnC,EACEC,SACAC,UACAC,QACAC,WACAC,OAAO,SACPC,mBAAkB,EAClBC,uBAAsB,EACtBC,YAAY,GACZC,aAEA,MAAMC,EAAWC,EAAAA,OAAuB,MAClCC,EAAwBD,EAAAA,OAAuB,MAG/CE,EAAeC,EAAAA,YAClBC,IACe,WAAVA,EAAEC,KACJd,KAGJ,CAACA,IAIGe,EAAqBH,EAAAA,YACxBC,IACKR,GAAuBQ,EAAEG,SAAWH,EAAEI,eACxCjB,KAGJ,CAACK,EAAqBL,IAiCxB,GA7BAkB,EAAAA,UAAU,KACR,GAAInB,EAeF,OAbAW,EAAsBS,QAAUC,SAASC,cAGzCD,SAASE,iBAAiB,UAAWX,GAGrCS,SAASG,KAAKC,MAAMC,SAAW,SAG3BjB,EAASW,SACXX,EAASW,QAAQO,QAGZ,KACLN,SAASO,oBAAoB,UAAWhB,GACxCS,SAASG,KAAKC,MAAMC,SAAW,GAG3Bf,EAAsBS,mBAAmBS,aAC3ClB,EAAsBS,QAAQO,UAKnC,CAAC3B,EAAQY,KAEPZ,EAAQ,OAAO,KAEpB,MAAM8B,EAAe,CAACC,EAAOC,MAAOD,EAAO3B,GAAOG,GAAW0B,OAAOC,SAASC,KAAK,KAE5EC,EACJC,EAAAA,IAAC,MAAA,CAAI9B,UAAWwB,EAAOO,QAASC,QAASvB,EAAoB,aAAW,OAAOwB,KAAK,SAClFrC,SAAAsC,EAAAA,KAAC,MAAA,CACClC,UAAWuB,EACXY,IAAKjC,EACLkC,UAAU,EACVH,KAAK,WACL,kBAAiBtC,EAAQ,mBAAgB,EAEvCC,SAAA,EAAAD,GAASG,IACToC,OAAC,SAAA,CAAOlC,UAAWwB,EAAOa,OACvBzC,SAAA,CAAAD,SACE,KAAA,CAAG2C,GAAG,cAActC,UAAWwB,EAAO7B,MACpCC,SAAAD,IAGJG,GACCgC,EAAAA,IAACS,EAAA,CACCC,QAAQ,WACR3C,KAAK,QACLmC,QAAStC,EACTM,UAAWwB,EAAOiB,YAClB,aAAW,cAEX7C,SAAAkC,EAAAA,IAAC,MAAA,CACCY,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BACN,cAAY,OAEZlD,SAAAkC,EAAAA,IAAC,OAAA,CACCiB,EAAE,uBACFC,OAAO,eACPC,YAAY,IACZC,cAAc,QACdC,eAAe,iBAO3BrB,EAAAA,IAAC,MAAA,CAAI9B,UAAWwB,EAAO4B,QAAUxD,aAChCK,GAAU6B,EAAAA,IAAC,SAAA,CAAO9B,UAAWwB,EAAOvB,OAASL,SAAAK,SAMpD,OAAOoD,eAAaxB,EAAcf,SAASG,QAI/C1B,EAAM+D,YAAc"}