import{f as e,u as s,d as r,r as t,j as n}from"./index-CoElTYbf.js";import{u as o}from"./cardMasteryStore-DLoKfaPt.js";import{s as c,M as a}from"./Match.module-DBXJJT7X.js";import"./SharedModeHeader-CqmUSN6k.js";import"./SettingsIcon-CGtfF6CW.js";import"./Modal-BFeOgvFJ.js";import"./Input-niKVvsjZ.js";import"./UnifiedSettings-T8dbAibN.js";const d=()=>{const{deckId:d}=e(),i=s(),{decks:l,activeDeck:h,selectDeck:u,isLoading:m}=r(),{getMasteredCards:j}=o(),[x,k]=t.useState(!1),[f,p]=t.useState(null);t.useEffect(()=>{if(!d)return void p("No deck ID provided");l.find(e=>e.id===d)?(u(d),k(!0),p(null)):m||p("Deck not found")},[d,l,u,m]),t.useEffect(()=>(document.body.classList.add("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[]);const C=t.useCallback(()=>{i(d?`/deck/${d}`:"/")},[i,d]);if(f)return n.jsx("div",{className:c.errorContainer,children:n.jsxs("div",{className:c.errorContent,children:[n.jsx("h1",{children:"Match Mode Error"}),n.jsx("p",{children:f}),n.jsx("button",{onClick:()=>i("/"),className:c.errorButton,children:"Return to Home"})]})});if(m||!x||!h)return null;if(h.content.length<2)return n.jsx("div",{className:c.errorContainer,children:n.jsxs("div",{className:c.errorContent,children:[n.jsx("h1",{children:"Insufficient Cards"}),n.jsxs("p",{children:["This deck needs at least 2 cards to play Match mode. Current deck has ",h.content.length," card",1===h.content.length?"":"s","."]}),n.jsx("button",{onClick:C,className:c.errorButton,children:"Back to Deck"})]})});const g=j(d),v=h.content.length-g.length;return v<2&&g.length>0?n.jsx("div",{className:c.errorContainer,children:n.jsxs("div",{className:c.errorContent,children:[n.jsx("h1",{children:"All Cards Mastered"}),n.jsxs("p",{children:["You've mastered most cards in this deck! Only ",v," unmastered card",1===v?"":"s"," remaining."]}),n.jsx("p",{children:'Enable "Include Mastered Cards" in settings to continue playing.'}),n.jsx("button",{onClick:C,className:c.errorButton,children:"Back to Deck"})]})}):n.jsx("div",{className:c.container,children:n.jsx(a,{deck:h})})};export{d as default};
