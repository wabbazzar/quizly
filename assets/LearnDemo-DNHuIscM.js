import{r as e,j as s,u as a,m as t}from"./index-K5uqA-3n.js";import{c as r,s as i,Q as n}from"./Learn.module-B1mVkgjh.js";import"./cardMasteryStore-z-5vmz49.js";import"./SharedModeHeader-DRg3hh5Z.js";import"./SettingsIcon-BSlFCqwD.js";const l="_progressContainer_1fx4u_1",c="_progressBarWrapper_1fx4u_10",o="_progressBar_1fx4u_10",d="_progressFill_1fx4u_23",m="_progressText_1fx4u_35",u="_progressTextOutside_1fx4u_42",_="_statsGrid_1fx4u_54",x="_statItem_1fx4u_61",h="_statLabel_1fx4u_79",p="_statValue_1fx4u_87",y="_goodAccuracy_1fx4u_96",g="_poorAccuracy_1fx4u_100",j="_streakFire_1fx4u_104",N="_masterySection_1fx4u_122",w="_masteryIndicators_1fx4u_127",v="_masteryItem_1fx4u_135",f="_masteryDot_1fx4u_141",k="_masteredDot_1fx4u_148",C="_strugglingDot_1fx4u_153",S="_masteryLabel_1fx4u_158",b="_masteryCount_1fx4u_166",A=e.memo(({progress:e,className:a})=>{const t=e.totalQuestions>0?e.questionsAnswered/e.totalQuestions*100:0,i=e.questionsAnswered>0?e.correctAnswers/e.questionsAnswered*100:0;return s.jsxs("div",{className:r(l,a),children:[s.jsxs("div",{className:c,children:[s.jsx("div",{className:o,role:"progressbar","aria-valuenow":Math.round(t),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progress: ${e.questionsAnswered} of ${e.totalQuestions} questions`,children:s.jsx("div",{className:d,style:{width:`${t}%`},children:t>20&&s.jsxs("span",{className:m,children:[Math.round(t),"%"]})})}),t<=20&&s.jsxs("span",{className:u,children:[Math.round(t),"%"]})]}),s.jsxs("div",{className:_,children:[s.jsxs("div",{className:x,children:[s.jsx("span",{className:h,children:"Progress"}),s.jsxs("span",{className:p,children:[e.questionsAnswered,"/",e.totalQuestions]})]}),s.jsxs("div",{className:x,children:[s.jsx("span",{className:h,children:"Accuracy"}),s.jsxs("span",{className:r(p,i>=80&&y,i<60&&g),children:[Math.round(i),"%"]})]}),s.jsxs("div",{className:x,children:[s.jsx("span",{className:h,children:"Streak"}),s.jsxs("span",{className:p,children:[e.currentStreak,e.currentStreak>=3&&s.jsx("span",{className:j,"aria-label":"fire streak",children:"🔥"})]})]}),s.jsxs("div",{className:x,children:[s.jsx("span",{className:h,children:"Avg Time"}),s.jsx("span",{className:p,children:(e=>{const s=Math.round(e/1e3);if(s<60)return`${s}s`;return`${Math.floor(s/60)}m ${s%60}s`})(e.averageResponseTime)})]})]}),s.jsx("div",{className:N,children:s.jsxs("div",{className:w,children:[s.jsxs("div",{className:v,children:[s.jsx("div",{className:r(f,k),"aria-hidden":"true"}),s.jsxs("span",{className:S,children:["Mastered",s.jsx("strong",{className:b,children:e.passedCards.size})]})]}),s.jsxs("div",{className:v,children:[s.jsx("div",{className:r(f,C),"aria-hidden":"true"}),s.jsxs("span",{className:S,children:["Needs Practice",s.jsx("strong",{className:b,children:e.strugglingCards.size})]})]}),e.maxStreak>0&&s.jsx("div",{className:v,children:s.jsxs("span",{className:S,children:["Best Streak",s.jsx("strong",{className:b,children:e.maxStreak})]})})]})})]})});A.displayName="LearnProgress";const $={sessionComplete:"_sessionComplete_1wi0l_1",container:"_container_1wi0l_10",header:"_header_1wi0l_20",emoji:"_emoji_1wi0l_25",title:"_title_1wi0l_31",excellent:"_excellent_1wi0l_38",great:"_great_1wi0l_42",good:"_good_1wi0l_46",fair:"_fair_1wi0l_50",needsWork:"_needsWork_1wi0l_54",subtitle:"_subtitle_1wi0l_58",resultsGrid:"_resultsGrid_1wi0l_65",resultCard:"_resultCard_1wi0l_72",resultValue:"_resultValue_1wi0l_87",resultLabel:"_resultLabel_1wi0l_94",masterySection:"_masterySection_1wi0l_102",masteryItem:"_masteryItem_1wi0l_109",masteryIcon:"_masteryIcon_1wi0l_120",mastered:"_mastered_1wi0l_124",struggling:"_struggling_1wi0l_128",masteryText:"_masteryText_1wi0l_132",duration:"_duration_1wi0l_143",actions:"_actions_1wi0l_151",actionButton:"_actionButton_1wi0l_157",keyHint:"_keyHint_1wi0l_174",primary:"_primary_1wi0l_197",secondary:"_secondary_1wi0l_206",tertiary:"_tertiary_1wi0l_222",motivationalMessage:"_motivationalMessage_1wi0l_240"};e.memo(({results:r,deckName:i,onRetry:n,onBackToDeck:l})=>{const c=a(),o=r.passedCards.length===r.totalQuestions&&0===r.strugglingCards.length;e.useEffect(()=>{const e=e=>{const s=e.target;s&&("INPUT"===s.tagName||"TEXTAREA"===s.tagName||s.isContentEditable)||("1"!==e.key||o?"2"===e.key?(e.preventDefault(),l()):"3"===e.key&&(e.preventDefault(),c("/")):(e.preventDefault(),n()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,l,c,o]);const d=e=>{const s=Math.floor(e/1e3),a=Math.floor(s/60);return a>0?`${a}m ${s%60}s`:`${s}s`},m=(()=>{if(o)return{message:"Deck Mastered!",emoji:"🏆",color:"excellent"};const e=r.accuracy;return e>=90?{message:"Outstanding!",emoji:"🌟",color:"excellent"}:e>=80?{message:"Great job!",emoji:"🎉",color:"great"}:e>=70?{message:"Good work!",emoji:"👍",color:"good"}:e>=60?{message:"Keep practicing!",emoji:"💪",color:"fair"}:{message:"Don't give up!",emoji:"🚀",color:"needsWork"}})();return s.jsx(t.div,{className:$.sessionComplete,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},"data-testid":"session-complete",children:s.jsxs("div",{className:$.container,children:[s.jsxs("header",{className:$.header,children:[s.jsx(t.div,{className:$.emoji,initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:m.emoji}),s.jsx("h1",{className:`${$.title} ${$[m.color]}`,children:m.message}),s.jsx("p",{className:$.subtitle,children:o?`Congratulations! You've mastered all cards in ${i}!`:`You completed the Learn session for ${i}`})]}),s.jsxs("div",{className:$.resultsGrid,children:[s.jsxs(t.div,{className:$.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[s.jsxs("div",{className:$.resultValue,children:[Math.round(r.accuracy),"%"]}),s.jsx("div",{className:$.resultLabel,children:"Accuracy"})]}),s.jsxs(t.div,{className:$.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:[s.jsxs("div",{className:$.resultValue,children:[r.correctAnswers,"/",r.totalQuestions]}),s.jsx("div",{className:$.resultLabel,children:"Correct"})]}),s.jsxs(t.div,{className:$.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[s.jsx("div",{className:$.resultValue,children:r.maxStreak}),s.jsx("div",{className:$.resultLabel,children:"Best Streak"})]}),s.jsxs(t.div,{className:$.resultCard,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:[s.jsx("div",{className:$.resultValue,children:d(r.averageResponseTime)}),s.jsx("div",{className:$.resultLabel,children:"Avg Time"})]})]}),(r.passedCards.length>0||r.strugglingCards.length>0)&&s.jsx(t.div,{className:$.masterySection,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},children:o?s.jsxs("div",{className:$.masteryItem,children:[s.jsx("span",{className:`${$.masteryIcon} ${$.mastered}`,children:"🏆"}),s.jsxs("span",{className:$.masteryText,children:["Perfect! All ",s.jsx("strong",{children:r.totalQuestions})," cards mastered!"]})]}):s.jsxs(s.Fragment,{children:[r.passedCards.length>0&&s.jsxs("div",{className:$.masteryItem,children:[s.jsx("span",{className:`${$.masteryIcon} ${$.mastered}`,children:"✨"}),s.jsxs("span",{className:$.masteryText,children:["Passed ",s.jsx("strong",{children:r.passedCards.length})," cards"]})]}),r.strugglingCards.length>0&&s.jsxs("div",{className:$.masteryItem,children:[s.jsx("span",{className:`${$.masteryIcon} ${$.struggling}`,children:"📚"}),s.jsxs("span",{className:$.masteryText,children:[s.jsx("strong",{children:r.strugglingCards.length})," cards need more practice"]})]})]})}),s.jsxs(t.div,{className:$.duration,initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:["Session duration: ",d(r.duration)]}),s.jsxs(t.div,{className:$.actions,initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:[!o&&s.jsxs("button",{className:`${$.actionButton} ${$.primary}`,onClick:n,"data-testid":"retry-button",children:[s.jsx("span",{className:$.keyHint,children:"1"}),"Practice Again"]}),s.jsxs("button",{className:`${$.actionButton} ${$.secondary}`,onClick:l,"data-testid":"back-button",children:[s.jsx("span",{className:$.keyHint,children:"2"}),"Back to Deck"]}),s.jsxs("button",{className:`${$.actionButton} ${$.tertiary}`,onClick:()=>c("/"),"data-testid":"home-button",children:[s.jsx("span",{className:$.keyHint,children:"3"}),"Home"]})]}),r.accuracy<70&&s.jsx(t.p,{className:$.motivationalMessage,initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:"Remember: Every expert was once a beginner. Keep practicing and you'll improve with each session!"})]})})}).displayName="SessionComplete";const I=[{id:"1",type:"multiple_choice",cardIndex:0,questionText:'What is the Chinese word for "hello"?',questionSides:["side_a"],correctAnswer:"你好",options:["你好","谢谢","再见","早上好"],difficulty:.3},{id:"2",type:"free_text",cardIndex:1,questionText:'How do you say "thank you" in Chinese?',questionSides:["side_a"],correctAnswer:"谢谢",acceptedAnswers:["谢谢","xie xie","xiexie","xièxie"],difficulty:.5},{id:"3",type:"multiple_choice",cardIndex:2,questionText:'Which of these means "goodbye"?',questionSides:["side_a"],correctAnswer:"再见",options:["晚安","早上好","再见","你好"],difficulty:.4}],T=()=>{const[a,t]=e.useState(0),[r,l]=e.useState(!1),[c,o]=e.useState(!1),[d,m]=e.useState({questionsAnswered:0,totalQuestions:I.length,correctAnswers:0,currentStreak:0,maxStreak:0,passedCards:new Set,strugglingCards:new Set,averageResponseTime:3500}),u=I[a],_=()=>{a<I.length-1?(t(e=>e+1),l(!1),o(!1)):alert("Session complete! Great job!")};return s.jsxs("div",{className:i.learnPage,children:[s.jsxs("header",{className:i.header,children:[s.jsx("h1",{className:i.title,children:"Learn Mode Demo"}),s.jsx("p",{className:i.subtitle,children:"Test the Learn UI components"})]}),s.jsxs("main",{className:i.content,children:[s.jsx(A,{progress:d,className:i.progressSection}),s.jsx(n,{question:u,onAnswer:(e,s)=>{o(s),l(!0),m(e=>{const a=s?e.correctAnswers+1:e.correctAnswers,t=s?e.currentStreak+1:0,r=Math.max(e.maxStreak,t),i=e.questionsAnswered+1,n=new Set(e.passedCards),l=new Set(e.strugglingCards);return s&&t>=3?(n.add(u.cardIndex),l.delete(u.cardIndex)):s||l.add(u.cardIndex),{...e,questionsAnswered:i,correctAnswers:a,currentStreak:t,maxStreak:r,passedCards:n,strugglingCards:l}}),setTimeout(()=>{_()},2e3)},showFeedback:r,feedback:r?{isCorrect:c,correctAnswer:u.correctAnswer,explanation:c?"Great job! You got it right.":`The correct answer is "${u.correctAnswer}".`}:void 0,disabled:r}),r&&s.jsx("div",{className:i.navigationButtons,children:s.jsx("button",{className:i.continueButton,onClick:_,"data-testid":"continue-button",children:a<I.length-1?"Next Question":"Finish"})})]})]})};export{T as default};
