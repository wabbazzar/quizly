{"version":3,"file":"deckVisibilityStore-mfeGq4eu.js","sources":["../../src/utils/familyLoader.ts","../../src/store/deckVisibilityStore.ts"],"sourcesContent":["import { DeckFamily } from '@/types';\n\nlet cachedFamilies: DeckFamily[] | null = null;\n\nexport const loadFamilies = async (): Promise<DeckFamily[]> => {\n  if (cachedFamilies) return cachedFamilies;\n\n  try {\n    const response = await fetch(`${import.meta.env.BASE_URL}data/families.json`);\n    if (!response.ok) return [];\n\n    const data = await response.json();\n    if (!data || !Array.isArray(data.families)) return [];\n\n    const families: DeckFamily[] = data.families\n      .filter(\n        (f: Record<string, unknown>) =>\n          typeof f.id === 'string' &&\n          typeof f.name === 'string' &&\n          typeof f.description === 'string' &&\n          typeof f.color === 'string' &&\n          typeof f.sortOrder === 'number'\n      )\n      .map((f: Record<string, unknown>) => ({\n        id: f.id as string,\n        name: f.name as string,\n        description: f.description as string,\n        color: f.color as string,\n        sortOrder: f.sortOrder as number,\n      }))\n      .sort((a: DeckFamily, b: DeckFamily) => a.sortOrder - b.sortOrder);\n\n    cachedFamilies = families;\n    return families;\n  } catch {\n    return [];\n  }\n};\n","import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { DeckFamily } from '@/types';\nimport { loadFamilies } from '@/utils/familyLoader';\n\ninterface DeckVisibilityStore {\n  hiddenDeckIds: string[];\n  families: DeckFamily[];\n  familiesLoaded: boolean;\n\n  loadFamilies: () => Promise<void>;\n  toggleDeckVisibility: (deckId: string) => void;\n  hideAllInFamily: (familyId: string, deckIds: string[]) => void;\n  showAllInFamily: (familyId: string, deckIds: string[]) => void;\n  isDeckHidden: (deckId: string) => boolean;\n}\n\nexport const useDeckVisibilityStore = create<DeckVisibilityStore>()(\n  persist(\n    (set, get) => ({\n      hiddenDeckIds: [],\n      families: [],\n      familiesLoaded: false,\n\n      loadFamilies: async () => {\n        if (get().familiesLoaded) return;\n        const families = await loadFamilies();\n        set({ families, familiesLoaded: true });\n      },\n\n      toggleDeckVisibility: (deckId: string) => {\n        set(state => {\n          const isHidden = state.hiddenDeckIds.includes(deckId);\n          return {\n            hiddenDeckIds: isHidden\n              ? state.hiddenDeckIds.filter(id => id !== deckId)\n              : [...state.hiddenDeckIds, deckId],\n          };\n        });\n      },\n\n      hideAllInFamily: (_familyId: string, deckIds: string[]) => {\n        set(state => {\n          const newHidden = new Set(state.hiddenDeckIds);\n          deckIds.forEach(id => newHidden.add(id));\n          return { hiddenDeckIds: Array.from(newHidden) };\n        });\n      },\n\n      showAllInFamily: (_familyId: string, deckIds: string[]) => {\n        set(state => ({\n          hiddenDeckIds: state.hiddenDeckIds.filter(id => !deckIds.includes(id)),\n        }));\n      },\n\n      isDeckHidden: (deckId: string) => {\n        return get().hiddenDeckIds.includes(deckId);\n      },\n    }),\n    {\n      name: 'deck-visibility-store',\n      partialize: state => ({\n        hiddenDeckIds: state.hiddenDeckIds,\n      }),\n    }\n  )\n);\n"],"names":["cachedFamilies","useDeckVisibilityStore","create","persist","set","get","hiddenDeckIds","families","familiesLoaded","loadFamilies","async","response","fetch","ok","data","json","Array","isArray","filter","f","id","name","description","color","sortOrder","map","sort","a","b","toggleDeckVisibility","deckId","state","includes","hideAllInFamily","_familyId","deckIds","newHidden","Set","forEach","add","from","showAllInFamily","isDeckHidden","partialize"],"mappings":"+CAEA,IAAIA,EAAsC,KAEnC,MCaMC,EAAyBC,IACpCC,EACE,CAACC,EAAKC,KAAA,CACJC,cAAe,GACfC,SAAU,GACVC,gBAAgB,EAEhBC,aAAcC,UACZ,GAAIL,IAAMG,eAAgB,OAC1B,MAAMD,ODtBcG,WAC1B,GAAIV,EAAgB,OAAOA,EAE3B,IACE,MAAMW,QAAiBC,MAAM,8BAC7B,IAAKD,EAASE,GAAI,MAAO,GAEzB,MAAMC,QAAaH,EAASI,OAC5B,IAAKD,IAASE,MAAMC,QAAQH,EAAKP,UAAW,MAAO,GAEnD,MAAMA,EAAyBO,EAAKP,SACjCW,OACEC,GACiB,iBAATA,EAAEC,IACS,iBAAXD,EAAEE,MACgB,iBAAlBF,EAAEG,aACU,iBAAZH,EAAEI,OACc,iBAAhBJ,EAAEK,WAEZC,IAAKN,IAAA,CACJC,GAAID,EAAEC,GACNC,KAAMF,EAAEE,KACRC,YAAaH,EAAEG,YACfC,MAAOJ,EAAEI,MACTC,UAAWL,EAAEK,aAEdE,KAAK,CAACC,EAAeC,IAAkBD,EAAEH,UAAYI,EAAEJ,WAG1D,OADAxB,EAAiBO,EACVA,CACT,CAAA,MACE,MAAO,EACT,GCV6BE,GACvBL,EAAI,CAAEG,WAAUC,gBAAgB,KAGlCqB,qBAAuBC,IACrB1B,EAAI2B,IAEK,CACLzB,cAFeyB,EAAMzB,cAAc0B,SAASF,GAGxCC,EAAMzB,cAAcY,OAAOE,GAAMA,IAAOU,GACxC,IAAIC,EAAMzB,cAAewB,OAKnCG,gBAAiB,CAACC,EAAmBC,KACnC/B,EAAI2B,IACF,MAAMK,EAAY,IAAIC,IAAIN,EAAMzB,eAEhC,OADA6B,EAAQG,QAAQlB,GAAMgB,EAAUG,IAAInB,IAC7B,CAAEd,cAAeU,MAAMwB,KAAKJ,OAIvCK,gBAAiB,CAACP,EAAmBC,KACnC/B,EAAI2B,IAAA,CACFzB,cAAeyB,EAAMzB,cAAcY,WAAciB,EAAQH,SAASZ,QAItEsB,aAAeZ,GACNzB,IAAMC,cAAc0B,SAASF,KAGxC,CACET,KAAM,wBACNsB,WAAYZ,IAAA,CACVzB,cAAeyB,EAAMzB"}